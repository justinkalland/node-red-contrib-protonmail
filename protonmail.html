<script type="text/x-red" data-template-name="protonmail">
  <div class="form-row">
      <label for="node-input-name"><i class="fa fa-envelope"></i> <span data-i18n="protonmail.label.to"></span></label>
      <input type="text" id="node-input-name" placeholder="email@protonmail.com">
  </div>
  <div class="form-row">
      <label for="node-input-username"><i class="fa fa-user"></i> <span data-i18n="protonmail.label.username"></span></label>
      <input type="text" id="node-input-username">
  </div>
  <div class="form-row">
      <label for="node-input-password"><i class="fa fa-lock"></i> <span data-i18n="protonmail.label.password"></span></label>
      <input type="password" id="node-input-password">
  </div>
  <br/>
  <div class="form-row">
      <label for="node-input-dname"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
      <input type="text" id="node-input-dname" data-i18n="[placeholder]node-red:common.label.name">
  </div>
</script>

<script type="text/x-red" data-help-name="protonmail">
  <p>Send an email through a ProtonMail account.</p>
  <h3>Inputs</h3>
  <dl class="message-properties">
    <dt>payload <span class="property-type">string</span></dt>
    <dd> The body of the email. </dd>
    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd> The subject of the email.</dd>
    <dt class="optional">to <span class="property-type">string</span></dt>
    <dd> Recipients email address, this is only used if the default message recipient is not configured in the node.</dd>
  </dl>
  <h3>Details</h3>
  <p>Sends the <code>msg.payload</code> as an email, with a subject of <code>msg.topic</code>.</p>
  <p>The default message recipient can be configured in the node properties, if it is left
  blank it should be set using the <code>msg.to</code> property of the incoming message.</p>
  <p>The payload can be HTML format.</p>
  <h3>References</h3>
  <ul>
    <li><a href="https://github.com/justinkalland/node-red-contrib-protonmail/issues">Bugs & Support</a></li>
  </ul>
</script>

<script type="text/javascript">
(function() {
  RED.nodes.registerType('protonmail',{
      category: 'social-output',
      color:"#c7e9c0",
      defaults: {
          name: {value:""},
          dname: {value:""}
      },
      credentials: {
          username: {type:"text"},
          password: {type: "password"},
      },
      inputs:1,
      outputs:0,
      icon: "envelope.png",
      align: "right",
      label: function() {
          return this.dname||this.name||"protonmail";
      },
      labelStyle: function() {
          return (this.dname)?"node_label_italic":"";
      }
  });
})();
</script>